<mah:MetroWindow x:Class="KDP_CATEGORY_RANKERApp.Views.MainWindow"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
                 xmlns:vm="clr-namespace:KDP_CATEGORY_RANKERApp.ViewModels"
                 xmlns:views="clr-namespace:KDP_CATEGORY_RANKERApp.Views"
                 Title="KDP Category Ranker" 
                 Height="800" Width="1200"
                 MinHeight="600" MinWidth="1000"
                 WindowStartupLocation="CenterScreen"
                 GlowBrush="{DynamicResource MahApps.Brushes.Accent}"
                 BorderThickness="1">

    <Window.DataContext>
        <vm:MainWindowViewModel />
    </Window.DataContext>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="{DynamicResource MahApps.Brushes.Accent}" Padding="16">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <TextBlock Text="KDP Category Ranker" 
                              FontSize="24" 
                              FontWeight="Bold" 
                              Foreground="White" 
                              VerticalAlignment="Center"/>
                    <TextBlock Text="v1.0.0" 
                              FontSize="12" 
                              Foreground="LightGray" 
                              VerticalAlignment="Bottom" 
                              Margin="8,0,0,4"/>
                </StackPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <ComboBox x:Name="MarketComboBox" 
                             Width="120" 
                             Margin="0,0,16,0"
                             ItemsSource="{Binding AvailableMarkets}"
                             SelectedItem="{Binding SelectedMarket}"/>
                    <Button Content="Settings" 
                           Command="{Binding OpenSettingsCommand}"
                           Style="{DynamicResource MahApps.Styles.Button.Square.Accent}"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main Content -->
        <TabControl Grid.Row="1" 
                   x:Name="MainTabControl"
                   Style="{DynamicResource MahApps.Styles.TabControl}"
                   Margin="8">

            <!-- Dashboard -->
            <TabItem Header="Dashboard">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <!-- Welcome Text -->
                        <TextBlock Grid.Row="0" 
                                  Text="Welcome to KDP Category Ranker"
                                  FontSize="28"
                                  FontWeight="Bold"
                                  Margin="0,0,0,8"/>
                        
                        <TextBlock Grid.Row="1" 
                                  Text="Research Amazon keywords, analyze categories, and generate AMS campaigns"
                                  FontSize="14"
                                  Foreground="{DynamicResource MahApps.Brushes.Gray1}"
                                  Margin="0,0,0,24"/>

                        <!-- Feature Cards -->
                        <UniformGrid Grid.Row="2" Columns="3" Rows="2">
                            <!-- Category Recommender Card (NEW - FEATURED) -->
                            <Border Style="{DynamicResource FeatureCardStyle}" Margin="4" Grid.ColumnSpan="3">
                                <Button Command="{Binding NavigateToCategoryRecommenderCommand}"
                                       Style="{DynamicResource TransparentButtonStyle}">
                                    <StackPanel>
                                        <TextBlock Text="🚀" FontSize="48" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                                        <TextBlock Text="Category Recommender" FontSize="20" FontWeight="Bold" HorizontalAlignment="Center"/>
                                        <TextBlock Text="Find the BEST KDP categories for your book and plan your path to bestseller status" 
                                                  TextWrapping="Wrap" 
                                                  TextAlignment="Center" 
                                                  FontWeight="SemiBold"
                                                  Margin="0,8,0,0"/>
                                    </StackPanel>
                                </Button>
                            </Border>

                            <!-- Keyword Research Card -->
                            <Border Style="{DynamicResource FeatureCardStyle}" Margin="4">
                                <Button Command="{Binding NavigateToKeywordResearchCommand}"
                                       Style="{DynamicResource TransparentButtonStyle}">
                                    <StackPanel>
                                        <TextBlock Text="🔍" FontSize="48" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                                        <TextBlock Text="Keywords" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center"/>
                                        <TextBlock Text="Find profitable keywords with competitive analysis" 
                                                  TextWrapping="Wrap" 
                                                  TextAlignment="Center" 
                                                  Margin="0,8,0,0"/>
                                    </StackPanel>
                                </Button>
                            </Border>

                            <!-- Category Analyzer Card -->
                            <Border Style="{DynamicResource FeatureCardStyle}" Margin="4">
                                <Button Command="{Binding NavigateToCategoryAnalyzerCommand}"
                                       Style="{DynamicResource TransparentButtonStyle}">
                                    <StackPanel>
                                        <TextBlock Text="📊" FontSize="48" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                                        <TextBlock Text="Categories" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center"/>
                                        <TextBlock Text="Analyze 19,000+ categories with historic trends" 
                                                  TextWrapping="Wrap" 
                                                  TextAlignment="Center" 
                                                  Margin="0,8,0,0"/>
                                    </StackPanel>
                                </Button>
                            </Border>

                            <!-- Competition Analyzer Card -->
                            <Border Style="{DynamicResource FeatureCardStyle}" Margin="4">
                                <Button Command="{Binding NavigateToCompetitionAnalyzerCommand}"
                                       Style="{DynamicResource TransparentButtonStyle}">
                                    <StackPanel>
                                        <TextBlock Text="⚔️" FontSize="48" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                                        <TextBlock Text="Competition" FontSize="18" FontWeight="Bold" HorizontalAlignment="Center"/>
                                        <TextBlock Text="Research top competitors and market opportunities" 
                                                  TextWrapping="Wrap" 
                                                  TextAlignment="Center" 
                                                  Margin="0,8,0,0"/>
                                    </StackPanel>
                                </Button>
                            </Border>
                        </UniformGrid>
                    </Grid>
                </ScrollViewer>
            </TabItem>

            <!-- Category Recommender Tab (FEATURED) -->
            <TabItem Header="🚀 Category Recommender">
                <views:CategoryRecommenderView/>
            </TabItem>

            <!-- Keyword Research Tab -->
            <TabItem Header="Keywords">
                <Frame x:Name="KeywordResearchFrame" NavigationUIVisibility="Hidden"/>
            </TabItem>

            <!-- Category Analyzer Tab -->
            <TabItem Header="Categories">
                <Frame x:Name="CategoryAnalyzerFrame" NavigationUIVisibility="Hidden"/>
            </TabItem>

            <!-- Competition Analyzer Tab -->
            <TabItem Header="Competition">
                <Frame x:Name="CompetitionAnalyzerFrame" NavigationUIVisibility="Hidden"/>
            </TabItem>

            <!-- Reverse ASIN Tab -->
            <TabItem Header="Reverse ASIN">
                <Frame x:Name="ReverseAsinFrame" NavigationUIVisibility="Hidden"/>
            </TabItem>

            <!-- AMS Generator Tab -->
            <TabItem Header="AMS Generator">
                <Frame x:Name="AmsGeneratorFrame" NavigationUIVisibility="Hidden"/>
            </TabItem>

            <!-- Help Tab -->
            <TabItem Header="Help">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="16">
                        <TextBlock Text="Getting Started" FontSize="24" FontWeight="Bold" Margin="0,0,0,16"/>
                        <TextBlock Text="Welcome to KDP Category Ranker! This tool helps you research Amazon KDP opportunities."
                                  TextWrapping="Wrap" Margin="0,0,0,16"/>
                        
                        <TextBlock Text="Quick Start Guide:" FontSize="18" FontWeight="Bold" Margin="0,16,0,8"/>
                        <TextBlock TextWrapping="Wrap" Margin="0,0,0,8">
                            <Run Text="1. "/>
                            <Run Text="Keywords: " FontWeight="Bold"/>
                            <Run Text="Start with the Keyword Research tab to find profitable keywords"/>
                        </TextBlock>
                        <TextBlock TextWrapping="Wrap" Margin="0,0,0,8">
                            <Run Text="2. "/>
                            <Run Text="Categories: " FontWeight="Bold"/>
                            <Run Text="Analyze category performance and trends"/>
                        </TextBlock>
                        <TextBlock TextWrapping="Wrap" Margin="0,0,0,8">
                            <Run Text="3. "/>
                            <Run Text="Competition: " FontWeight="Bold"/>
                            <Run Text="Research your competitors' strategies"/>
                        </TextBlock>
                        <TextBlock TextWrapping="Wrap" Margin="0,0,0,16">
                            <Run Text="4. "/>
                            <Run Text="AMS: " FontWeight="Bold"/>
                            <Run Text="Generate keyword lists for Amazon ads"/>
                        </TextBlock>

                        <Button Content="Free Amazon Ads Course" 
                               Command="{Binding OpenAmazonAdsCourseCommand}"
                               HorizontalAlignment="Left"
                               Style="{DynamicResource MahApps.Styles.Button.Square.Accent}"/>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
        </TabControl>

        <!-- Status Bar -->
        <StatusBar Grid.Row="2">
            <StatusBarItem>
                <TextBlock Text="{Binding StatusMessage}"/>
            </StatusBarItem>
            <StatusBarItem HorizontalAlignment="Right">
                <TextBlock Text="{Binding LastSyncTime, StringFormat='Last Sync: {0:yyyy-MM-dd HH:mm}'}"/>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</mah:MetroWindow>